<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TonTask - Platform Tugas Mobile dengan Tampilan Android Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary: #6366F1;
            --primary-dark: #4F46E5;
            --secondary: #8B5CF6;
            --accent: #3B82F6;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --dark: #1F2937;
            --light: #F9FAFB;
            --text-primary: #111827;
            --text-secondary: #6B7280;
            --card-bg: #FFFFFF;
            --overlay: rgba(0, 0, 0, 0.5);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--light);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #3B82F6 100%);
            opacity: 0.1;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            opacity: 0.3;
            animation: float 15s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0) scale(1);
            }
            25% {
                transform: translateY(-20px) translateX(10px) scale(1.1);
            }
            50% {
                transform: translateY(10px) translateX(-10px) scale(0.9);
            }
            75% {
                transform: translateY(-10px) translateX(20px) scale(1.05);
            }
        }

        .light-streak {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            opacity: 0.3;
            animation: moveStreak 8s infinite linear;
        }

        @keyframes moveStreak {
            0% {
                left: -100%;
                width: 100px;
            }
            100% {
                left: 100%;
                width: 200px;
            }
        }

        .glow-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent);
            box-shadow: 0 0 10px var(--accent);
            opacity: 0;
            animation: glowPulse 4s infinite ease-in-out;
        }

        @keyframes glowPulse {
            0%, 100% {
                opacity: 0;
                transform: scale(0.8);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.2);
            }
        }

        /* Container */
        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Views */
        .view {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .view.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 500;
            color: var(--primary);
        }

        .header-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
            background: var(--light);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .input-icon {
            position: relative;
        }

        .input-icon .material-icons {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            cursor: pointer;
        }

        /* Buttons */
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            width: 100%;
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-icon {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            position: fixed;
            bottom: 24px;
            right: 24px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
            z-index: 100;
        }

        .btn-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.5);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
            border-radius: 8px;
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        /* Task Cards */
        .task-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .task-title {
            font-weight: 500;
            font-size: 16px;
        }

        .task-category {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }

        .task-progress {
            margin-bottom: 12px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 14px;
        }

        .progress-bar {
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .task-timer {
            display: flex;
            align-items: center;
            color: var(--warning);
            font-size: 14px;
            margin-bottom: 12px;
        }

        .task-actions {
            display: flex;
            gap: 8px;
        }

        /* Filters */
        .filter-container {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .filter-btn {
            padding: 8px 16px;
            border-radius: 20px;
            background: var(--light);
            border: 1px solid #E5E7EB;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
        }

        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Popup */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .popup {
            background: var(--card-bg);
            border-radius: 24px 24px 0 0;
            width: 100%;
            max-width: 480px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 24px;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .popup-overlay.active .popup {
            transform: translateY(0);
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .popup-title {
            font-size: 20px;
            font-weight: 500;
        }

        .popup-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .popup-close:hover {
            background: #E5E7EB;
        }

        /* Upload Area */
        .upload-area {
            border: 2px dashed #E5E7EB;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            margin: 20px 0;
            transition: var(--transition);
            cursor: pointer;
        }

        .upload-area:hover, .upload-area.dragover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }

        .upload-icon {
            font-size: 48px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .upload-text {
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .upload-hint {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Profile Section */
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            margin-right: 16px;
        }

        .profile-info h2 {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .profile-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            background: linear-gradient(135deg, #F59E0B, #F97316);
            color: white;
            margin-bottom: 8px;
        }

        .profile-id {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Earnings Card */
        .earnings-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .earnings-title {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 8px;
        }

        .earnings-amount {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .earnings-details {
            display: flex;
            justify-content: space-between;
        }

        .earnings-item {
            text-align: center;
        }

        .earnings-item-value {
            font-size: 18px;
            font-weight: 500;
        }

        .earnings-item-label {
            font-size: 12px;
            opacity: 0.8;
        }

        /* Referral Section */
        .referral-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #E5E7EB;
        }

        .referral-code {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--light);
            padding: 12px 16px;
            border-radius: 12px;
            margin-bottom: 16px;
        }

        .referral-code-text {
            font-weight: 500;
            font-family: monospace;
        }

        .referral-progress {
            margin-bottom: 16px;
        }

        .referral-progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        /* Settings */
        .settings-section {
            margin-bottom: 24px;
        }

        .settings-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #E5E7EB;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-label {
            font-size: 16px;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background: #E5E7EB;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .toggle-switch.active {
            background: var(--primary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            top: 2px;
            left: 2px;
            transition: var(--transition);
        }

        .toggle-switch.active::after {
            left: 26px;
        }

        /* Dropdown */
        .dropdown {
            position: relative;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--light);
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .dropdown-toggle:hover {
            border-color: var(--primary);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-top: 8px;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
        }

        .dropdown.active .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: var(--light);
        }

        .dropdown-item.active {
            color: var(--primary);
            font-weight: 500;
        }

        /* Coming Soon */
        .coming-soon {
            text-align: center;
            padding: 40px 20px;
        }

        .coming-soon-icon {
            font-size: 64px;
            color: var(--primary);
            margin-bottom: 16px;
        }

        .coming-soon-title {
            font-size: 24px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .coming-soon-subtitle {
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        .countdown {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .countdown-item {
            text-align: center;
        }

        .countdown-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .countdown-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 12px;
        }

        /* Loading State */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                padding: 16px;
            }
        }

        /* Dark Mode */
        body.dark-mode {
            --light: #1F2937;
            --card-bg: #111827;
            --text-primary: #F9FAFB;
            --text-secondary: #9CA3AF;
            --overlay: rgba(0, 0, 0, 0.7);
        }

        body.dark-mode .form-input {
            background: #374151;
            border-color: #4B5563;
            color: var(--text-primary);
        }

        body.dark-mode .task-card,
        body.dark-mode .card,
        body.dark-mode .popup,
        body.dark-mode .bottom-nav {
            background: #111827;
        }

        body.dark-mode .filter-btn,
        body.dark-mode .dropdown-toggle {
            background: #374151;
            border-color: #4B5563;
            color: var(--text-secondary);
        }

        body.dark-mode .referral-code,
        body.dark-mode .settings-item {
            border-color: #4B5563;
        }

        body.dark-mode .referral-code {
            background: #374151;
        }

        /* Animations */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
            }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-5px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(5px);
            }
        }

        /* Password Strength Indicator */
        .password-strength {
            height: 4px;
            border-radius: 2px;
            margin-top: 8px;
            background: #E5E7EB;
            overflow: hidden;
        }

        .password-strength-fill {
            height: 100%;
            transition: width 0.3s, background-color 0.3s;
        }

        .strength-weak {
            width: 33%;
            background: var(--error);
        }

        .strength-medium {
            width: 66%;
            background: var(--warning);
        }

        .strength-strong {
            width: 100%;
            background: var(--success);
        }

        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--error);
        }

        /* Chart Container */
        .chart-container {
            height: 120px;
            margin: 16px 0;
            position: relative;
        }

        .chart {
            display: flex;
            align-items: flex-end;
            height: 100%;
            gap: 8px;
        }

        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, var(--primary), var(--secondary));
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: var(--transition);
        }

        .chart-bar:hover {
            opacity: 0.8;
        }

        .chart-label {
            position: absolute;
            bottom: -20px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 10px;
            color: var(--text-secondary);
        }

        /* RTL Support */
        body.rtl {
            direction: rtl;
        }

        body.rtl .header {
            flex-direction: row-reverse;
        }

        body.rtl .profile-header {
            flex-direction: row-reverse;
        }

        body.rtl .profile-avatar {
            margin-left: 16px;
            margin-right: 0;
        }

        body.rtl .bottom-nav {
            flex-direction: row-reverse;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg" id="animatedBg"></div>

    <!-- Container -->
    <div class="container">
        <!-- Login View -->
        <div class="view active" id="loginView">
            <div class="card">
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="width: 80px; height: 80px; margin: 0 auto 16px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white; font-size: 32px; font-weight: 700; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);">
                        TT
                    </div>
                    <h1 style="font-size: 24px; font-weight: 500; color: var(--primary);">TonTask</h1>
                    <p style="color: var(--text-secondary); font-size: 14px;">Platform Tugas Mobile dengan Tampilan Android Premium</p>
                </div>

                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <div class="input-icon">
                            <input type="email" class="form-input" id="emailInput" placeholder="nama@email.com" required>
                            <span class="material-icons">email</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <div class="input-icon">
                            <input type="password" class="form-input" id="passwordInput" placeholder="Minimal 8 karakter" required>
                            <span class="material-icons" id="passwordToggle">visibility</span>
                        </div>
                        <div class="password-strength">
                            <div class="password-strength-fill" id="passwordStrength"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Kode Referral (Opsional)</label>
                        <div class="input-icon">
                            <input type="text" class="form-input" id="referralInput" placeholder="Masukkan kode referral">
                            <span class="material-icons">card_giftcard</span>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary" style="margin-bottom: 12px;">Login</button>
                    <button type="button" class="btn btn-outline" id="registerBtn">Register</button>

                    <div style="text-align: center; margin-top: 16px;">
                        <a href="#" style="color: var(--primary); text-decoration: none; font-size: 14px;">Lupa Password?</a>
                    </div>
                </form>

                <div style="margin-top: 24px; text-align: center;">
                    <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">Atau login dengan</p>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button class="btn btn-outline" style="width: auto; padding: 10px 16px;">
                            <span class="material-icons" style="font-size: 18px; margin-right: 4px;">fingerprint</span>
                            Biometrik
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Poster Dashboard View -->
        <div class="view" id="posterDashboardView">
            <div class="header">
                <h1>Poster Dashboard</h1>
                <div class="header-icon">
                    <span class="material-icons">dashboard</span>
                </div>
            </div>

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h2 style="font-size: 18px; font-weight: 500;">Tugas Aktif</h2>
                    <span style="background: var(--primary); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">5 Aktif</span>
                </div>

                <div id="taskList">
                    <!-- Task items will be dynamically added here -->
                </div>
            </div>

            <button class="btn btn-icon" id="addTaskBtn">
                <span class="material-icons">add</span>
            </button>
        </div>

        <!-- User Dashboard View -->
        <div class="view" id="userDashboardView">
            <div class="header">
                <h1>User Dashboard</h1>
                <div class="header-icon">
                    <span class="material-icons">person</span>
                </div>
            </div>

            <div class="card">
                <h2 style="font-size: 18px; font-weight: 500; margin-bottom: 16px;">Progress Hari Ini</h2>
                
                <div style="margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 14px; color: var(--text-secondary);">Klik Aktual vs Target</span>
                        <span style="font-size: 14px; font-weight: 500;">75/100</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;"></div>
                    </div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <p style="font-size: 14px; color: var(--text-secondary);">Pendapatan Hari Ini</p>
                        <p style="font-size: 24px; font-weight: 700; color: var(--primary);">2.5 TON</p>
                    </div>
                    <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white;">
                        <span class="material-icons" style="font-size: 32px;">trending_up</span>
                    </div>
                </div>
            </div>

            <div class="filter-container">
                <button class="filter-btn active" data-filter="all">ALL</button>
                <button class="filter-btn" data-filter="website">WEBSITE</button>
                <button class="filter-btn" data-filter="social">SOCIAL</button>
                <button class="filter-btn" data-filter="app">APP</button>
                <button class="filter-btn" data-filter="video">VIDEO</button>
            </div>

            <div id="availableTasks">
                <!-- Available tasks will be dynamically added here -->
            </div>
        </div>

        <!-- Coming Soon View -->
        <div class="view" id="comingSoonView">
            <div class="header">
                <h1>Coming Soon</h1>
                <div class="header-icon">
                    <span class="material-icons">update</span>
                </div>
            </div>

            <div class="coming-soon">
                <span class="material-icons coming-soon-icon">schedule</span>
                <h2 class="coming-soon-title">Tugas Baru Segera Hadir</h2>
                <p class="coming-soon-subtitle">Reset tugas harian pada pukul 00:00 UTC</p>

                <div class="countdown" id="countdown">
                    <div class="countdown-item">
                        <div class="countdown-value" id="hours">12</div>
                        <div class="countdown-label">Jam</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="minutes">34</div>
                        <div class="countdown-label">Menit</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="seconds">56</div>
                        <div class="countdown-label">Detik</div>
                    </div>
                </div>

                <div class="card" style="text-align: left;">
                    <h3 style="font-size: 16px; font-weight: 500; margin-bottom: 12px;">Tugas Mendatang</h3>
                    
                    <div class="task-card">
                        <div class="task-header">
                            <div>
                                <div class="task-title">Review Aplikasi Baru</div>
                                <div class="task-category">APP</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 14px; font-weight: 500; color: var(--primary);">5-10 TON</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Besok</div>
                            </div>
                        </div>
                        <p style="font-size: 14px; color: var(--text-secondary); margin-top: 8px;">Install dan berikan rating minimal 4 bintang</p>
                        <button class="btn btn-small btn-outline" style="margin-top: 12px; width: auto;">
                            <span class="material-icons" style="font-size: 16px; margin-right: 4px;">notification</span>
                            Set Reminder
                        </button>
                    </div>

                    <div class="task-card">
                        <div class="task-header">
                            <div>
                                <div class="task-title">Subscribe YouTube Channel</div>
                                <div class="task-category">VIDEO</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 14px; font-weight: 500; color: var(--primary);">3-5 TON</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">2 Hari Lagi</div>
                            </div>
                        </div>
                        <p style="font-size: 14px; color: var(--text-secondary); margin-top: 8px;">Subscribe dan nonton minimal 2 video</p>
                        <button class="btn btn-small btn-outline" style="margin-top: 12px; width: auto;">
                            <span class="material-icons" style="font-size: 16px; margin-right: 4px;">notification</span>
                            Set Reminder
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile View -->
        <div class="view" id="profileView">
            <div class="header">
                <h1>Profile</h1>
                <div class="header-icon">
                    <span class="material-icons">account_circle</span>
                </div>
            </div>

            <div class="profile-header">
                <div class="profile-avatar">
                    <span class="material-icons" style="font-size: 40px;">person</span>
                </div>
                <div class="profile-info">
                    <div class="profile-badge">Gold Member</div>
                    <h2 id="userName">John Doe</h2>
                    <div class="profile-id">ID: #12345678</div>
                </div>
            </div>

            <div class="earnings-card">
                <div class="earnings-title">Saldo Utama</div>
                <div class="earnings-amount">47.85 TON</div>
                <div class="earnings-details">
                    <div class="earnings-item">
                        <div class="earnings-item-value">2.5</div>
                        <div class="earnings-item-label">Hari Ini</div>
                    </div>
                    <div class="earnings-item">
                        <div class="earnings-item-value">125.4</div>
                        <div class="earnings-item-label">Total</div>
                    </div>
                    <div class="earnings-item">
                        <div class="earnings-item-value">77.55</div>
                        <div class="earnings-item-label">Withdrawal</div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart" id="earningsChart">
                    <!-- Chart bars will be dynamically added -->
                </div>
            </div>

            <div class="referral-card">
                <h3 style="font-size: 16px; font-weight: 500; margin-bottom: 16px;">Referral System</h3>
                
                <div class="referral-code">
                    <div class="referral-code-text">TONTASK123</div>
                    <button class="btn btn-small btn-primary" style="width: auto;">
                        <span class="material-icons" style="font-size: 16px; margin-right: 4px;">content_copy</span>
                        Salin
                    </button>
                </div>

                <div class="referral-progress">
                    <div class="referral-progress-info">
                        <span>Progress Referral</span>
                        <span>3/5 Terverifikasi</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%;"></div>
                    </div>
                </div>

                <button class="btn btn-primary" style="width: 100%;">
                    <span class="material-icons" style="font-size: 18px; margin-right: 4px;">share</span>
                    Bagikan Kode
                </button>

                <p style="font-size: 12px; color: var(--text-secondary); margin-top: 12px; text-align: center;">
                    Minimal 5 teman terverifikasi untuk membuka fitur withdrawal
                </p>
            </div>

            <div class="card">
                <h3 style="font-size: 16px; font-weight: 500; margin-bottom: 16px;">Withdrawal</h3>
                
                <div style="margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 14px; color: var(--text-secondary);">Saldo Tersedia</span>
                        <span style="font-size: 14px; font-weight: 500;">47.85 TON</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 14px; color: var(--text-secondary);">Status Withdrawal</span>
                        <span style="font-size: 14px; color: var(--error); font-weight: 500;">LOCKED</span>
                    </div>
                </div>

                <div style="background: var(--light); padding: 12px; border-radius: 8px; margin-bottom: 16px;">
                    <p style="font-size: 14px; font-weight: 500; margin-bottom: 8px;">Syarat Withdrawal:</p>
                    <div style="font-size: 14px;">
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <span class="material-icons" style="font-size: 16px; color: var(--success); margin-right: 4px;">check_circle</span>
                            <span>Minimal saldo 10 TON</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <span class="material-icons" style="font-size: 16px; color: var(--success); margin-right: 4px;">check_circle</span>
                            <span>Verifikasi email selesai</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <span class="material-icons" style="font-size: 16px; color: var(--error); margin-right: 4px;">cancel</span>
                            <span>5 referral terverifikasi (3/5)</span>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <span class="material-icons" style="font-size: 16px; color: var(--success); margin-right: 4px;">check_circle</span>
                            <span>Minimal withdrawal: 10 TON</span>
                        </div>
                    </div>
                </div>

                <button class="btn btn-outline" style="width: 100%;" disabled>
                    Withdrawal Tidak Tersedia
                </button>
            </div>
        </div>

        <!-- Settings View -->
        <div class="view" id="settingsView">
            <div class="header">
                <h1>Pengaturan</h1>
                <div class="header-icon">
                    <span class="material-icons">settings</span>
                </div>
            </div>

            <div class="card">
                <div class="settings-section">
                    <h3 class="settings-title">Pengaturan Bahasa</h3>
                    <div class="dropdown" id="languageDropdown">
                        <div class="dropdown-toggle">
                            <span id="selectedLanguage">Indonesia</span>
                            <span class="material-icons">expand_more</span>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-item active" data-lang="id">Indonesia</div>
                            <div class="dropdown-item" data-lang="en">English</div>
                            <div class="dropdown-item" data-lang="zh">Chinese</div>
                            <div class="dropdown-item" data-lang="ar">Arabic</div>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">Tampilan</h3>
                    <div class="settings-item">
                        <span class="settings-label">Dark Mode</span>
                        <div class="toggle-switch" id="darkModeToggle"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">Notifikasi</h3>
                    <div class="settings-item">
                        <span class="settings-label">Notifikasi Tugas Baru</span>
                        <div class="toggle-switch active"></div>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Notifikasi Deadline</span>
                        <div class="toggle-switch active"></div>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Notifikasi Pembayaran</span>
                        <div class="toggle-switch"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">Keamanan</h3>
                    <div class="settings-item">
                        <span class="settings-label">Ganti Password</span>
                        <span class="material-icons">chevron_right</span>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Two-Factor Authentication</span>
                        <span class="material-icons">chevron_right</span>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Pengaturan Biometrik</span>
                        <span class="material-icons">chevron_right</span>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Manajemen Session</span>
                        <span class="material-icons">chevron_right</span>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">Bantuan & Dukungan</h3>
                    <div class="settings-item">
                        <span class="settings-label">FAQ</span>
                        <span class="material-icons">chevron_right</span>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Hubungi Support</span>
                        <span class="material-icons">chevron_right</span>
                    </div>
                    <div class="settings-item">
                        <span class="settings-label">Tutorial Interaktif</span>
                        <span class="material-icons">chevron_right</span>
                    </div>
                </div>

                <button class="btn btn-danger" style="width: 100%; margin-top: 20px;">
                    Logout
                </button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav" id="bottomNav" style="display: none;">
        <div class="nav-item active" data-view="userDashboardView">
            <span class="material-icons nav-icon">home</span>
            <span class="nav-label">Beranda</span>
        </div>
        <div class="nav-item" data-view="posterDashboardView">
            <span class="material-icons nav-icon">dashboard</span>
            <span class="nav-label">Poster</span>
        </div>
        <div class="nav-item" data-view="comingSoonView">
            <span class="material-icons nav-icon">update</span>
            <span class="nav-label">Coming Soon</span>
        </div>
        <div class="nav-item" data-view="profileView">
            <span class="material-icons nav-icon">person</span>
            <span class="nav-label">Profile</span>
        </div>
        <div class="nav-item" data-view="settingsView">
            <span class="material-icons nav-icon">settings</span>
            <span class="nav-label">Pengaturan</span>
        </div>
    </div>

    <!-- Task Popup -->
    <div class="popup-overlay" id="taskPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">Detail Tugas</h3>
                <div class="popup-close" id="closeTaskPopup">
                    <span class="material-icons">close</span>
                </div>
            </div>

            <div class="task-card" style="margin-bottom: 20px;">
                <div class="task-header">
                    <div>
                        <div class="task-title" id="popupTaskTitle">Kunjungi Website</div>
                        <div class="task-category" id="popupTaskCategory">WEBSITE</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 18px; font-weight: 500; color: var(--primary);" id="popupTaskReward">5 TON</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">Reward</div>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h4 style="font-size: 16px; font-weight: 500; margin-bottom: 12px;">Link Tugas</h4>
                <div style="display: flex; gap: 8px;">
                    <div style="flex: 1; padding: 12px; background: var(--light); border-radius: 8px; font-size: 14px; word-break: break-all;" id="popupTaskLink">
                        https://example.com/task-link
                    </div>
                    <button class="btn btn-small btn-outline" id="copyLinkBtn">
                        <span class="material-icons" style="font-size: 16px;">content_copy</span>
                    </button>
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-top: 8px;" id="openLinkBtn">
                    <span class="material-icons" style="font-size: 18px; margin-right: 4px;">open_in_new</span>
                    Buka Sekarang
                </button>
            </div>

            <div style="margin-bottom: 20px;">
                <h4 style="font-size: 16px; font-weight: 500; margin-bottom: 12px;">Deskripsi Tugas</h4>
                <p style="font-size: 14px; color: var(--text-secondary); line-height: 1.5;" id="popupTaskDescription">
                    Kunjungi website yang diberikan dan lakukan interaksi minimal 30 detik. Ambil screenshot sebagai bukti.
                </p>
            </div>

            <div style="margin-bottom: 20px;">
                <h4 style="font-size: 16px; font-weight: 500; margin-bottom: 12px;">Waktu Tersisa</h4>
                <div style="display: flex; align-items: center; color: var(--warning);">
                    <span class="material-icons" style="margin-right: 8px;">timer</span>
                    <span id="popupTaskTimer">29:45</span>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h4 style="font-size: 16px; font-weight: 500; margin-bottom: 12px;">Upload Bukti</h4>
                <div class="upload-area" id="uploadArea">
                    <span class="material-icons upload-icon">cloud_upload</span>
                    <p class="upload-text">Seret dan lepas gambar di sini</p>
                    <p class="upload-hint">atau klik untuk memilih file (JPG, PNG, maks. 5MB)</p>
                </div>
                <input type="file" id="fileInput" accept="image/*" style="display: none;">
                <div id="imagePreview" style="margin-top: 12px; display: none;">
                    <img id="previewImg" style="width: 100%; border-radius: 8px;">
                </div>
            </div>

            <div style="display: flex; gap: 12px;">
                <button class="btn btn-outline" id="cancelTaskBtn" style="flex: 1;">Batal</button>
                <button class="btn btn-primary" id="submitTaskBtn" style="flex: 1;">Submit Tugas</button>
            </div>
        </div>
    </div>

    <!-- Edit Task Popup -->
    <div class="popup-overlay" id="editTaskPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">Edit Tugas</h3>
                <div class="popup-close" id="closeEditTaskPopup">
                    <span class="material-icons">close</span>
                </div>
            </div>

            <form id="editTaskForm">
                <div class="form-group">
                    <label class="form-label">Judul Tugas</label>
                    <input type="text" class="form-input" id="editTaskTitle" maxlength="50" required>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">
                        <span id="titleCharCount">0</span>/50 karakter
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Deskripsi</label>
                    <textarea class="form-input" id="editTaskDescription" rows="4" maxlength="200" required></textarea>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">
                        <span id="descCharCount">0</span>/200 karakter
                    </div>
                </div>

                <div style="display: flex; gap: 12px;">
                    <button type="button" class="btn btn-outline" id="cancelEditBtn" style="flex: 1;">Batal</button>
                    <button type="submit" class="btn btn-primary" style="flex: 1;">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Create animated background
            createAnimatedBackground();
            
            // Initialize views
            initializeViews();
            
            // Initialize forms
            initializeForms();
            
            // Initialize task management
            initializeTaskManagement();
            
            // Initialize user dashboard
            initializeUserDashboard();
            
            // Initialize profile
            initializeProfile();
            
            // Initialize settings
            initializeSettings();
            
            // Initialize countdown
            initializeCountdown();
            
            // Initialize bottom navigation
            initializeBottomNavigation();
            
            // Check for dark mode preference
            checkDarkModePreference();
        });

        // Create animated background
        function createAnimatedBackground() {
            const bg = document.getElementById('animatedBg');
            
            // Create particles
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                const size = Math.random() * 60 + 20;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 15}s`;
                particle.style.animationDuration = `${Math.random() * 10 + 15}s`;
                
                bg.appendChild(particle);
            }
            
            // Create light streaks
            for (let i = 0; i < 5; i++) {
                const streak = document.createElement('div');
                streak.classList.add('light-streak');
                
                streak.style.top = `${Math.random() * 100}%`;
                streak.style.animationDelay = `${Math.random() * 8}s`;
                streak.style.animationDuration = `${Math.random() * 4 + 6}s`;
                
                bg.appendChild(streak);
            }
            
            // Create glow dots
            for (let i = 0; i < 10; i++) {
                const dot = document.createElement('div');
                dot.classList.add('glow-dot');
                
                dot.style.left = `${Math.random() * 100}%`;
                dot.style.top = `${Math.random() * 100}%`;
                dot.style.animationDelay = `${Math.random() * 4}s`;
                
                bg.appendChild(dot);
            }
        }

        // Initialize views
        function initializeViews() {
            // View switching
            const viewElements = document.querySelectorAll('.view');
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetView = this.getAttribute('data-view');
                    
                    // Update active nav item
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Switch view
                    viewElements.forEach(view => view.classList.remove('active'));
                    document.getElementById(targetView).classList.add('active');
                });
            });
            
            // Close popups
            const closeButtons = document.querySelectorAll('.popup-close');
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const popup = this.closest('.popup-overlay');
                    popup.classList.remove('active');
                });
            });
            
            // Close popup on overlay click
            const overlays = document.querySelectorAll('.popup-overlay');
            overlays.forEach(overlay => {
                overlay.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
        }

        // Initialize forms
        function initializeForms() {
            // Login form
            const loginForm = document.getElementById('loginForm');
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = document.getElementById('emailInput').value;
                const password = document.getElementById('passwordInput').value;
                
                // Validate email
                if (!validateEmail(email)) {
                    showMessage('Format email tidak valid', 'error');
                    return;
                }
                
                // Validate password
                if (password.length < 8) {
                    showMessage('Password minimal 8 karakter', 'error');
                    return;
                }
                
                // Simulate login
                showMessage('Login berhasil!', 'success');
                
                // Switch to user dashboard
                setTimeout(() => {
                    document.getElementById('loginView').classList.remove('active');
                    document.getElementById('userDashboardView').classList.add('active');
                    document.getElementById('bottomNav').style.display = 'flex';
                }, 1000);
            });
            
            // Register button
            document.getElementById('registerBtn').addEventListener('click', function() {
                showMessage('Fitur registrasi akan segera hadir', 'info');
            });
            
            // Password toggle
            const passwordToggle = document.getElementById('passwordToggle');
            const passwordInput = document.getElementById('passwordInput');
            
            passwordToggle.addEventListener('click', function() {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                this.textContent = type === 'password' ? 'visibility' : 'visibility_off';
            });
            
            // Password strength indicator
            passwordInput.addEventListener('input', function() {
                const password = this.value;
                const strengthIndicator = document.getElementById('passwordStrength');
                
                if (password.length === 0) {
                    strengthIndicator.className = 'password-strength-fill';
                    return;
                }
                
                let strength = 0;
                
                // Length check
                if (password.length >= 8) strength++;
                if (password.length >= 12) strength++;
                
                // Complexity checks
                if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
                if (/[0-9]/.test(password)) strength++;
                if (/[^a-zA-Z0-9]/.test(password)) strength++;
                
                // Update indicator
                strengthIndicator.className = 'password-strength-fill';
                
                if (strength <= 2) {
                    strengthIndicator.classList.add('strength-weak');
                } else if (strength <= 4) {
                    strengthIndicator.classList.add('strength-medium');
                } else {
                    strengthIndicator.classList.add('strength-strong');
                }
            });
            
            // Edit task form
            const editTaskForm = document.getElementById('editTaskForm');
            editTaskForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const title = document.getElementById('editTaskTitle').value;
                const description = document.getElementById('editTaskDescription').value;
                
                // Update task (in a real app, this would save to a database)
                showMessage('Tugas berhasil diperbarui', 'success');
                
                // Close popup
                document.getElementById('editTaskPopup').classList.remove('active');
            });
            
            // Character counters
            const titleInput = document.getElementById('editTaskTitle');
            const descInput = document.getElementById('editTaskDescription');
            const titleCount = document.getElementById('titleCharCount');
            const descCount = document.getElementById('descCharCount');
            
            titleInput.addEventListener('input', function() {
                titleCount.textContent = this.value.length;
            });
            
            descInput.addEventListener('input', function() {
                descCount.textContent = this.value.length;
            });
            
            // Cancel edit button
            document.getElementById('cancelEditBtn').addEventListener('click', function() {
                document.getElementById('editTaskPopup').classList.remove('active');
            });
        }

        // Initialize task management
        function initializeTaskManagement() {
            // Add task button
            document.getElementById('addTaskBtn').addEventListener('click', function() {
                // In a real app, this would open a form to create a new task
                showMessage('Fitur tambah tugas akan segera hadir', 'info');
            });
            
            // Generate sample tasks
            generateSampleTasks();
            
            // Task popup buttons
            document.getElementById('copyLinkBtn').addEventListener('click', function() {
                const link = document.getElementById('popupTaskLink').textContent;
                copyToClipboard(link);
                showMessage('Link disalin ke clipboard', 'success');
            });
            
            document.getElementById('openLinkBtn').addEventListener('click', function() {
                const link = document.getElementById('popupTaskLink').textContent;
                window.open(link, '_blank');
            });
            
            document.getElementById('cancelTaskBtn').addEventListener('click', function() {
                document.getElementById('taskPopup').classList.remove('active');
            });
            
            document.getElementById('submitTaskBtn').addEventListener('click', function() {
                const imagePreview = document.getElementById('imagePreview');
                
                if (imagePreview.style.display === 'none') {
                    showMessage('Silakan upload bukti gambar', 'error');
                    return;
                }
                
                // In a real app, this would submit the task to a server
                showMessage('Tugas berhasil dikirim', 'success');
                
                // Close popup
                document.getElementById('taskPopup').classList.remove('active');
                
                // Reset image preview
                imagePreview.style.display = 'none';
                document.getElementById('fileInput').value = '';
            });
            
            // File upload
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const imagePreview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            
            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', function() {
                this.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileUpload(files[0]);
                }
            });
            
            fileInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    handleFileUpload(this.files[0]);
                }
            });
            
            function handleFileUpload(file) {
                // Validate file type
                if (!file.type.match('image.*')) {
                    showMessage('Hanya file gambar yang diperbolehkan', 'error');
                    return;
                }
                
                // Validate file size (5MB max)
                if (file.size > 5 * 1024 * 1024) {
                    showMessage('Ukuran file maksimal 5MB', 'error');
                    return;
                }
                
                // Preview image
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    imagePreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        // Generate sample tasks
        function generateSampleTasks() {
            const taskList = document.getElementById('taskList');
            const availableTasks = document.getElementById('availableTasks');
            
            // Sample tasks for poster dashboard
            const posterTasks = [
                {
                    title: 'Review Produk A',
                    category: 'WEBSITE',
                    progress: 75,
                    total: 100,
                    timeLeft: '2 jam 30 menit',
                    isWarning: false
                },
                {
                    title: 'Subscribe Channel B',
                    category: 'SOCIAL',
                    progress: 50,
                    total: 100,
                    timeLeft: '5 jam 15 menit',
                    isWarning: false
                },
                {
                    title: 'Install App C',
                    category: 'APP',
                    progress: 90,
                    total: 100,
                    timeLeft: '30 menit',
                    isWarning: true
                }
            ];
            
            // Sample tasks for user dashboard
            const userTasks = [
                {
                    title: 'Kunjungi Website X',
                    category: 'WEBSITE',
                    reward: '5 TON',
                    time: '2 menit'
                },
                {
                    title: 'Like Post Instagram',
                    category: 'SOCIAL',
                    reward: '2 TON',
                    time: '1 menit'
                },
                {
                    title: 'Install Game Y',
                    category: 'APP',
                    reward: '10 TON',
                    time: '5 menit'
                },
                {
                    title: 'Nonton Video Z',
                    category: 'VIDEO',
                    reward: '3 TON',
                    time: '3 menit'
                }
            ];
            
            // Generate poster dashboard tasks
            posterTasks.forEach(task => {
                const taskCard = document.createElement('div');
                taskCard.className = 'task-card';
                
                taskCard.innerHTML = `
                    <div class="task-header">
                        <div>
                            <div class="task-title">${task.title}</div>
                            <div class="task-category">${task.category}</div>
                        </div>
                    </div>
                    <div class="task-progress">
                        <div class="progress-info">
                            <span>Progress: ${task.progress}/${task.total}</span>
                            <span>${task.progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${task.progress}%;"></div>
                        </div>
                    </div>
                    <div class="task-timer">
                        <span class="material-icons" style="font-size: 16px; margin-right: 4px;">timer</span>
                        <span>${task.timeLeft}</span>
                    </div>
                    <div class="task-actions">
                        <button class="btn btn-small btn-outline edit-task-btn" data-title="${task.title}">
                            <span class="material-icons" style="font-size: 16px; margin-right: 4px;">edit</span>
                            Edit
                        </button>
                        <button class="btn btn-small btn-danger delete-task-btn">
                            <span class="material-icons" style="font-size: 16px; margin-right: 4px;">delete</span>
                            Hapus
                        </button>
                    </div>
                `;
                
                taskList.appendChild(taskCard);
            });
            
            // Generate user dashboard tasks
            userTasks.forEach(task => {
                const taskCard = document.createElement('div');
                taskCard.className = 'task-card';
                taskCard.setAttribute('data-category', task.category.toLowerCase());
                
                taskCard.innerHTML = `
                    <div class="task-header">
                        <div>
                            <div class="task-title">${task.title}</div>
                            <div class="task-category">${task.category}</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 16px; font-weight: 500; color: var(--primary);">${task.reward}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">${task.time}</div>
                        </div>
                    </div>
                    <button class="btn btn-primary claim-task-btn" style="width: 100%; margin-top: 12px;" data-title="${task.title}" data-category="${task.category}" data-reward="${task.reward}">
                        Claim
                    </button>
                `;
                
                availableTasks.appendChild(taskCard);
            });
            
            // Add event listeners to task buttons
            document.querySelectorAll('.edit-task-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const title = this.getAttribute('data-title');
                    document.getElementById('editTaskTitle').value = title;
                    document.getElementById('titleCharCount').textContent = title.length;
                    document.getElementById('editTaskPopup').classList.add('active');
                });
            });
            
            document.querySelectorAll('.delete-task-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (confirm('Apakah Anda yakin ingin menghapus tugas ini?')) {
                        this.closest('.task-card').remove();
                        showMessage('Tugas berhasil dihapus', 'success');
                    }
                });
            });
            
            document.querySelectorAll('.claim-task-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const title = this.getAttribute('data-title');
                    const category = this.getAttribute('data-category');
                    const reward = this.getAttribute('data-reward');
                    
                    // Update popup content
                    document.getElementById('popupTaskTitle').textContent = title;
                    document.getElementById('popupTaskCategory').textContent = category;
                    document.getElementById('popupTaskReward').textContent = reward;
                    
                    // Show popup
                    document.getElementById('taskPopup').classList.add('active');
                    
                    // Start timer
                    startTaskTimer();
                });
            });
        }

        // Initialize user dashboard
        function initializeUserDashboard() {
            // Filter buttons
            const filterButtons = document.querySelectorAll('.filter-btn');
            const taskCards = document.querySelectorAll('#availableTasks .task-card');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Update active filter
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter tasks
                    const filter = this.getAttribute('data-filter');
                    
                    taskCards.forEach(card => {
                        if (filter === 'all' || card.getAttribute('data-category') === filter) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
        }

        // Initialize profile
        function initializeProfile() {
            // Generate earnings chart
            const chartContainer = document.getElementById('earningsChart');
            const days = ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'];
            const values = [2.5, 3.2, 2.8, 4.5, 3.7, 5.2, 2.5];
            const maxValue = Math.max(...values);
            
            days.forEach((day, index) => {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${(values[index] / maxValue) * 100}%`;
                
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = day;
                
                bar.appendChild(label);
                chartContainer.appendChild(bar);
            });
            
            // Copy referral code
            document.querySelector('.referral-card .btn').addEventListener('click', function() {
                const code = document.querySelector('.referral-code-text').textContent;
                copyToClipboard(code);
                showMessage('Kode referral disalin ke clipboard', 'success');
            });
        }

        // Initialize settings
        function initializeSettings() {
            // Language dropdown
            const languageDropdown = document.getElementById('languageDropdown');
            const selectedLanguage = document.getElementById('selectedLanguage');
            const languageItems = document.querySelectorAll('.dropdown-item');
            
            languageDropdown.addEventListener('click', function() {
                this.classList.toggle('active');
            });
            
            languageItems.forEach(item => {
                item.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    const text = this.textContent;
                    
                    // Update selected language
                    languageItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    selectedLanguage.textContent = text;
                    
                    // Close dropdown
                    languageDropdown.classList.remove('active');
                    
                    // Apply language (in a real app, this would translate the UI)
                    if (lang === 'ar') {
                        document.body.classList.add('rtl');
                    } else {
                        document.body.classList.remove('rtl');
                    }
                    
                    showMessage(`Bahasa diubah ke ${text}`, 'success');
                });
            });
            
            // Dark mode toggle
            const darkModeToggle = document.getElementById('darkModeToggle');
            darkModeToggle.addEventListener('click', function() {
                this.classList.toggle('active');
                document.body.classList.toggle('dark-mode');
                
                // Save preference
                const isDarkMode = document.body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', isDarkMode);
                
                showMessage(isDarkMode ? 'Dark mode diaktifkan' : 'Dark mode dinonaktifkan', 'success');
            });
            
            // Other toggle switches
            const toggleSwitches = document.querySelectorAll('.toggle-switch:not(#darkModeToggle)');
            toggleSwitches.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    
                    const label = this.previousElementSibling.textContent;
                    const isActive = this.classList.contains('active');
                    
                    showMessage(`${label} ${isActive ? 'diaktifkan' : 'dinonaktifkan'}`, 'success');
                });
            });
            
            // Settings items with chevron
            const settingsItems = document.querySelectorAll('.settings-item .material-icons.chevron_right');
            settingsItems.forEach(icon => {
                icon.parentElement.addEventListener('click', function() {
                    const label = this.querySelector('.settings-label').textContent;
                    showMessage(`Fitur ${label} akan segera hadir`, 'info');
                });
            });
            
            // Logout button
            document.querySelector('.btn-danger').addEventListener('click', function() {
                if (confirm('Apakah Anda yakin ingin logout?')) {
                    // In a real app, this would clear the session
                    document.getElementById('profileView').classList.remove('active');
                    document.getElementById('loginView').classList.add('active');
                    document.getElementById('bottomNav').style.display = 'none';
                    showMessage('Anda telah logout', 'success');
                }
            });
        }

        // Initialize countdown
        function initializeCountdown() {
            // Set target time to next midnight UTC
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setUTCDate(tomorrow.getUTCDate() + 1);
            tomorrow.setUTCHours(0, 0, 0, 0);
            
            const targetTime = tomorrow.getTime();
            
            function updateCountdown() {
                const currentTime = new Date().getTime();
                const difference = targetTime - currentTime;
                
                if (difference > 0) {
                    const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((difference % (1000 * 60)) / 1000);
                    
                    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                } else {
                    // Reset countdown for next day
                    initializeCountdown();
                }
            }
            
            // Update countdown every second
            setInterval(updateCountdown, 1000);
            updateCountdown(); // Initial call
        }

        // Initialize bottom navigation
        function initializeBottomNavigation() {
            // Already handled in initializeViews()
        }

        // Check dark mode preference
        function checkDarkModePreference() {
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeToggle').classList.add('active');
            }
        }

        // Task timer
        function startTaskTimer() {
            let timeLeft = 30 * 60; // 30 minutes in seconds
            
            const timerElement = document.getElementById('popupTaskTimer');
            
            const timerInterval = setInterval(() => {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showMessage('Waktu habis! Tugas dibatalkan.', 'error');
                    document.getElementById('taskPopup').classList.remove('active');
                }
            }, 1000);
            
            // Store interval ID to clear it when popup is closed
            document.getElementById('taskPopup').dataset.timerId = timerInterval;
        }

        // Clear task timer when popup is closed
        document.getElementById('closeTaskPopup').addEventListener('click', function() {
            const timerId = document.getElementById('taskPopup').dataset.timerId;
            if (timerId) {
                clearInterval(timerId);
            }
        });

        document.getElementById('cancelTaskBtn').addEventListener('click', function() {
            const timerId = document.getElementById('taskPopup').dataset.timerId;
            if (timerId) {
                clearInterval(timerId);
            }
        });

        // Utility functions
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }

        function showMessage(message, type) {
            // Create message element
            const messageEl = document.createElement('div');
            messageEl.style.position = 'fixed';
            messageEl.style.top = '20px';
            messageEl.style.left = '50%';
            messageEl.style.transform = 'translateX(-50%)';
            messageEl.style.padding = '12px 24px';
            messageEl.style.borderRadius = '8px';
            messageEl.style.color = 'white';
            messageEl.style.fontWeight = '500';
            messageEl.style.zIndex = '9999';
            messageEl.style.opacity = '0';
            messageEl.style.transition = 'opacity 0.3s';
            
            // Set background color based on type
            switch (type) {
                case 'success':
                    messageEl.style.backgroundColor = 'var(--success)';
                    break;
                case 'error':
                    messageEl.style.backgroundColor = 'var(--error)';
                    break;
                case 'info':
                    messageEl.style.backgroundColor = 'var(--primary)';
                    break;
                default:
                    messageEl.style.backgroundColor = 'var(--text-secondary)';
            }
            
            messageEl.textContent = message;
            document.body.appendChild(messageEl);
            
            // Show message
            setTimeout(() => {
                messageEl.style.opacity = '1';
            }, 10);
            
            // Hide message after 3 seconds
            setTimeout(() => {
                messageEl.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(messageEl);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
